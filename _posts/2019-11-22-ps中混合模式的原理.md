---
layout:     post
title:      "PS中混合模式的原理"
date:       2019-11-22
author:     "黄承靖"
tags:
    - 设计
    - Photoshop
---
### 定义
混合模式在百度百科中的定义——混合模式是图像处理技术中的一个技术名词，主要功效是可以用不同的方法将对象颜色与底层对象的颜色混合。当您将一种混合模式应用于某一对象时，在此对象的图层或组下方的任何对象上都可看到混合模式的效果


### 分类
各种模式
变暗系
变亮系
饱和度系
差集系
颜色系
正片叠底


### 相关概念
不妨定义上方图层为A，下方图层为B，结果是C
8位每通道下，颜色是0-255，将0-255线性换算到0-1区间（四舍五入）
逐像素，分通道计算
R、G、B换算成0-1区间

### 详细公式与其性质

#### 正片叠底 Multiply 
扣白留黑
乘法C=A*B，R、G、B分别相乘 
黑=0，白=1，所以黑色混合全为黑，白色混合保留原色

#### 反相 Invert
C=1-A，相当于负片

#### 滤色 Screen 
扣黑留白不过曝
C=1-（1-A）（1-B），相当于A、B反相之后，再正片叠底，再反相
A或B为白，则C为白
A或B为黑，则C为另一图层本身
A、B均不为0、1，则C一定不会过曝
应用场景：黑背景，难扣的白图案，例如弦月

#### 叠加 overlay
扣中灰，留黑白
if a<0.5,C=2*A*B
else C=1-(1-A)*(1-B)
即若像素值小于中灰——偏灰黑【0.5（128）】，则二倍正片叠底；若像素值大于中灰——偏白，则二倍滤色
最终结果是，暗的更暗，亮的更亮，可以增强效果和立体感
应用：在修改图层下方添加一层中灰0.5图层，通过橡皮擦工具后者黑白画笔，绘制底层图层
从而更改上层图片局部效果————亮暗调节
应用场景：叠加纹理图层。
先用色阶调成中灰，然后叠加（不会过曝）
再建立图层蒙版，选择需要纹理的地方


#### 柔光
原理与叠加相似，只是函数的陡峭程度不同，变亮变暗的速度不同
柔光更加柔和，速度更缓一些

#### 变亮
C=max（A，B）
取两个图层中更亮的一个颜色

#### 变暗
C=min（A，B）
取两个图层中更暗的一个颜色

#### 颜色加深
C=A-（1-A）*（1-B）/B
通过增加“对比度”使底色的颜色变暗来反映绘图色，和白色混合没变化

#### 颜色减淡
C=A+A*B/（1-B）
通过降低“对比度”使底色的颜色变亮来反映绘图色，和黑色混合没变化

#### 差值模式(Difference)
C=|A-B|
用较亮的像素点的像素值减去较暗的像素点的像素值
白色反相；黑色不变

#### 减去模式(Subtract)
C=Max(0,A-B)
是将原始图像与混合图像相对应的像素提取出来并将它们相减。

### 特别注意下方图层是控制图层，上方图层是被改变的图层